(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc6dce46"],{1685:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Form",{ref:"userForm",attrs:{model:e.user,rules:e.ruleValidate,"label-position":"right","label-width":110}},[r("Row",{attrs:{gutter:16}},[r("h4",[e._v("基本信息")]),r("Col",{attrs:{span:"12",push:"2"}},[r("FormItem",{attrs:{prop:"name",label:"用户姓名："}},[r("Input",{staticStyle:{width:"auto"},attrs:{type:"text",placeholder:"请输入用户姓名",clearable:""},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),r("FormItem",{attrs:{prop:"phone",label:"手机号码："}},[r("Input",{staticStyle:{width:"auto"},attrs:{type:"text",prefix:"ios-phone-portrait",placeholder:"请输入手机号码",clearable:""},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),r("FormItem",{attrs:{prop:"username",label:"登录账号："}},[r("Input",{staticStyle:{width:"auto"},attrs:{type:"text",prefix:"ios-contact",placeholder:"请输入账号名称",clearable:""},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),r("FormItem",{attrs:{label:"用户性别："}},[r("Select",{staticStyle:{width:"194px"},attrs:{prefix:"md-transgender"},model:{value:e.user.gender,callback:function(t){e.$set(e.user,"gender",t)},expression:"user.gender"}},e._l(e.genderList,(function(t){return r("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1),r("FormItem",{attrs:{label:"年龄："}},[r("Input",{staticStyle:{width:"auto"},attrs:{type:"number",number:"",placeholder:"请输入年龄"},model:{value:e.user.age,callback:function(t){e.$set(e.user,"age",t)},expression:"user.age"}})],1),r("FormItem",{attrs:{label:"岗位："}},[r("Input",{staticStyle:{width:"auto"},attrs:{type:"text",placeholder:"Enter text",clearable:""}})],1)],1),r("Col",{attrs:{span:"12",push:"1"}},[r("FormItem",{attrs:{label:"所属角色："}},[r("Select",{staticStyle:{width:"auto"},attrs:{multiple:"",prefix:"ios-infinite"},model:{value:e.roles,callback:function(t){e.roles=t},expression:"roles"}},e._l(e.userGroupRoleList,(function(t){return r("Option",{key:t.id,attrs:{value:t.v1}},[e._v(e._s(t.v5))])})),1)],1),r("FormItem",{attrs:{label:"归属部门："}},[r("Input",{staticStyle:{width:"auto"},attrs:{type:"text",number:"",placeholder:"Enter text",clearable:""}})],1),r("FormItem",{attrs:{label:"邮箱："}},[r("Input",{staticStyle:{width:"auto"},attrs:{type:"text",prefix:"ios-mail",placeholder:"请输入邮箱地址",clearable:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),r("FormItem",{attrs:{prop:"password",label:"登录密码："}},[r("Input",{staticStyle:{width:"auto"},attrs:{type:"password",prefix:"ios-lock",placeholder:"请输入登录密码",clearable:""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),r("FormItem",{attrs:{label:"用户状态："}},[r("i-switch",{attrs:{size:"large"},model:{value:e.user.enable,callback:function(t){e.$set(e.user,"enable",t)},expression:"user.enable"}},[r("span",{attrs:{slot:"open"},slot:"open"},[e._v("ON")]),r("span",{attrs:{slot:"close"},slot:"close"},[e._v("OFF")])])],1)],1)],1),r("h4",[e._v("其他信息")]),r("Row",[r("Col",{attrs:{span:"17",push:"2"}},[r("FormItem",{attrs:{label:"备注："}},[r("Input",{attrs:{type:"textarea",rows:2,placeholder:"描述"},model:{value:e.user.label,callback:function(t){e.$set(e.user,"label",t)},expression:"user.label"}})],1)],1)],1),r("FormItem",{style:{padding:"0 400px"}},[r("Row",[r("Col",{attrs:{span:"8"}},[r("Button",{attrs:{type:"success",icon:"md-checkmark"},on:{click:e.handleSubmit}},[e._v("保存")])],1),r("Col",{attrs:{span:"8"}},[r("Button",{attrs:{type:"error",icon:"md-return-left"},on:{click:e.handleReset}},[e._v("重置")])],1),r("Col",{attrs:{span:"8"}},[r("Button",{attrs:{type:"warning",icon:"md-close"},on:{click:e.handleCloseTag}},[e._v("关闭")])],1)],1)],1)],1)],1)},a=[],n=(r("8e6e"),r("456d"),r("ac6a"),r("7514"),r("bd86")),l=r("2f62");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i={props:{tUser:{type:Object,default:function(){return null}},routeName:String},name:"OneUserPage",data:function(){return{genderList:[{label:"男",value:1},{label:"女",value:2},{label:"未知",value:0}],userGroupRoleList:[],roles:[],user:{enable:!0},ruleValidate:{name:[{required:!0,message:"名字不能为空",trigger:"blur"}],username:[{required:!0,message:"登录账户不能为空",trigger:"blur"}],phone:[{required:!0,message:"手机号不能为空",trigger:"blur"}],password:[{required:!0,message:"登录密码不能为空",trigger:"blur"}],age:[{required:!0,pattern:/^[a-z0-9]+$/,message:"请输入数字",trigger:"change"}],gender:[{required:!0,message:"性别不能为空",trigger:"change"}]}}},methods:u({},Object(l["d"])(["closeTag"]),{},Object(l["b"])(["handleUserGroupRoleList"]),{findRole:function(e){return this.userGroupRoleList.find((function(t){return t.v1===e}))},handleSubmit:function(){var e=this;this.$refs.userForm.validate((function(t){if(t){var r={adminUser:u({},e.user)},s=[],a=[];if(e.tUser){var n=e.user.roles||[];e.roles.forEach((function(t){var r=n.find((function(e){return t===e.v1}));r||s.push({v1:t,v2:"a",v5:e.findRole(t).v5})})),n.forEach((function(t){var r=e.roles.find((function(e){return t.v1===e}));r||a.push(t.id)})),r.addRoles=s,r.deleteRids=a}else e.roles.forEach((function(t){s.push({v1:t,v2:"a",v5:e.findRole(t).v5})})),r.addRoles=s;e.$emit("submit",r)}}))},handleReset:function(){this.tUser?this.user=u({},this.tUser):this.user={enable:!0}},handleCloseTag:function(){this.closeTag({name:this.routeName}),sessionStorage.removeItem("selectionUser")},pullRoleList:function(){var e=this;this.handleUserGroupRoleList().then((function(t){t&&t.length>0&&(e.userGroupRoleList=t)})).catch((function(e){return console.log("错误：",e)}))}}),created:function(){this.tUser&&(this.user=u({},this.tUser),this.user.roles&&this.user.roles.length>0&&(this.roles=this.tUser.roles.map((function(e){return e.v1})))),this.pullRoleList()}},c=i,p=(r("df8a"),r("2877")),d=Object(p["a"])(c,s,a,!1,null,"3019aa0e",null);t["default"]=d.exports},"64d7":function(e,t,r){},b5a1:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("OneUserPage",{ref:"oup",attrs:{"route-name":"modify_user_page","t-user":e.user},on:{submit:e.save}})},a=[],n=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),l=r("1685"),o=r("2f62");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c={components:{OneUserPage:l["default"]},name:"modify_user_page",data:function(){return{user:null}},methods:i({},Object(o["b"])(["handleUpdateUser"]),{save:function(e){var t=this;this.handleUpdateUser(e).then((function(e){t.$refs.oup.handleCloseTag(),t.$Message.success("更新用户信息成功")})).catch((function(){return t.$Message.error("更新用户信息失败")}))}}),created:function(){this.user=JSON.parse(sessionStorage.getItem("selectionUser")||"{}")}},p=c,d=r("2877"),f=Object(d["a"])(p,s,a,!1,null,"4bd5f896",null);t["default"]=f.exports},df8a:function(e,t,r){"use strict";var s=r("64d7"),a=r.n(s);a.a}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2abab8f8"],{"3cb0":function(t,e,r){},ac14:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Form",{ref:"policyForm",attrs:{model:t.policy,rules:t.ruleValidate,"label-position":"right","label-width":110}},[r("Row",{attrs:{gutter:2}},[r("h4",[t._v("权限信息")]),r("Col",{attrs:{span:"12",push:"3"}},[r("FormItem",{attrs:{label:"租户："}},[r("Select",{staticStyle:{width:"auto"},attrs:{prefix:"md-transgender"},model:{value:t.policy.v1,callback:function(e){t.$set(t.policy,"v1",e)},expression:"policy.v1"}},t._l(t.domainList,(function(e){return r("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),r("FormItem",{attrs:{prop:"v5",label:"权限名称："}},[r("Input",{staticStyle:{width:"auto"},attrs:{type:"text",placeholder:"请输入角色名称",clearable:""},model:{value:t.policy.v5,callback:function(e){t.$set(t.policy,"v5",e)},expression:"policy.v5"}})],1),r("FormItem",{attrs:{prop:"v4",label:"suf："}},[r("Input",{staticStyle:{width:"auto"},attrs:{type:"text",placeholder:"请输入suf",clearable:""},model:{value:t.policy.v4,callback:function(e){t.$set(t.policy,"v4",e)},expression:"policy.v4"}})],1)],1),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{prop:"v0",label:"角色key："}},[r("Select",{staticStyle:{width:"180px"},attrs:{prefix:"ios-infinite"},model:{value:t.policy.v0,callback:function(e){t.$set(t.policy,"v0",e)},expression:"policy.v0"}},t._l(t.userGroupRoleList,(function(e){return r("Option",{key:e.id,attrs:{value:e.v1}},[t._v(t._s(e.v5))])})),1)],1),r("FormItem",{attrs:{prop:"v2",label:"URL策略："}},[r("Input",{staticStyle:{width:"auto"},attrs:{type:"text",placeholder:"请输入URL策略",clearable:""},model:{value:t.policy.v2,callback:function(e){t.$set(t.policy,"v2",e)},expression:"policy.v2"}})],1),r("FormItem",{attrs:{label:"Action策略："}},[r("Select",{staticStyle:{width:"auto"},attrs:{multiple:"",prefix:"md-transgender"},model:{value:t.policy.v3,callback:function(e){t.$set(t.policy,"v3",e)},expression:"policy.v3"}},t._l(t.actionList,(function(e){return r("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1)],1),r("h4",[t._v("其他信息")]),r("br"),r("FormItem",{style:{padding:"0 400px"}},[r("Row",[r("Col",{attrs:{span:"8"}},[r("Button",{attrs:{type:"success",icon:"md-checkmark"},on:{click:t.handleSubmit}},[t._v("保存")])],1),r("Col",{attrs:{span:"8"}},[r("Button",{attrs:{type:"error",icon:"md-return-left"},on:{click:t.handleReset}},[t._v("重置")])],1),r("Col",{attrs:{span:"8"}},[r("Button",{attrs:{type:"warning",icon:"md-close"},on:{click:t.handleCloseTag}},[t._v("关闭")])],1)],1)],1)],1)],1)},o=[],l=(r("8e6e"),r("456d"),r("ac6a"),r("28a5"),r("c5f6"),r("a481"),r("6b54"),r("bd86")),n=r("2f62");function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){Object(l["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var s={props:{tPolicy:{type:Object,default:function(){return null}},routeName:String},name:"OnePolicyPage",data:function(){return{actionList:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"}],domainList:[],policy:{v4:".*"},ruleValidate:{v0:[{required:!0,message:"请选择角色key",trigger:"blur"}],v1:[{required:!0,message:"租户不能为空",trigger:"blur"}],v2:[{required:!0,message:"URL策略不能为空",trigger:"blur"}],v5:[{required:!0,message:"角色名称不能为空",trigger:"blur"}]},userGroupRoleList:[]}},methods:c({},Object(n["d"])(["closeTag"]),{},Object(n["b"])(["handleUserGroupRoleList","handleDomainList"]),{handleSubmit:function(){var t=this;this.$refs.policyForm.validate((function(e){if(e){var r=t.policy,i=r.v1,o=r.v3;if(!i)return void t.$Message.error("租户不能为空");if(!o||0===o.length)return void t.$Message.error("Action策略不能为空");var l=c({},t.policy);1===o.length&&(l.v3=o.toString()),o.length>1&&(l.v3=o.toString().replace(/,/g,"|")),l.id&&(l.id=Number(l.id)),t.$emit("submit",l)}}))},handleReset:function(){this.tPolicy?(this.policy=c({},this.tPolicy),this.policy.v3&&(this.policy.v3=this.policy.v3.split("|")||[])):this.policy={v4:".*"}},handleCloseTag:function(){var t={name:this.routeName};this.tPolicy&&(t.query=this.tPolicy),this.closeTag(t)},pullRoleList:function(){var t=this;this.handleUserGroupRoleList().then((function(e){e&&e.length>0&&(t.userGroupRoleList=e)})).catch((function(t){return console.log("错误：",t)}))},pullDomainList:function(){var t=this;this.handleDomainList().then((function(e){e&&e.forEach((function(e){return t.domainList.push({value:e,label:e})}))})).catch((function(t){return console.log("错误：",t)}))}}),created:function(){this.pullRoleList(),this.pullDomainList(),this.tPolicy&&(this.policy=c({},this.tPolicy),this.policy.v3&&(this.policy.v3=this.policy.v3.split("|")||[]))}},u=s,p=(r("f3fd"),r("2877")),v=Object(p["a"])(u,i,o,!1,null,"6a9cf8d2",null);e["default"]=v.exports},f3fd:function(t,e,r){"use strict";var i=r("3cb0"),o=r.n(i);o.a},f88f:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("OnePolicyPage",{ref:"opp",attrs:{"route-name":"add_policy_page"},on:{submit:t.save}})},o=[],l=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),n=r("ac14"),a=r("2f62");function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){Object(l["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var u={components:{OnePolicyPage:n["default"]},name:"add_policy_page",data:function(){return{}},methods:s({},Object(a["b"])(["handleCreatePolicy"]),{save:function(t){var e=this;this.handleCreatePolicy(t).then((function(t){e.$refs.opp.handleReset(),e.$Message.success("创建权限规则成功")})).catch((function(){return e.$Message.error("创建权限规则失败")}))}})},p=u,v=r("2877"),f=Object(v["a"])(p,i,o,!1,null,"797e39e9",null);e["default"]=f.exports}}]);